# Facade

## Introdu√ß√£o 

O padr√£o Facade tem como principal objetivo fornecer uma interface unificada para um conjunto de interfaces em um subsistema, simplificando o acesso e reduzindo o acoplamento entre os componentes internos. Ele √© particularmente √∫til em sistemas onde m√∫ltiplas opera√ß√µes precisam ser executadas de forma coordenada, mas que devem ser expostas de maneira coesa e compreens√≠vel para outras partes da aplica√ß√£o.

Ao final, uma vers√£o consolidada √© apresentada, reunindo os melhores elementos das contribui√ß√µes anteriores, visando clareza, modularidade e ader√™ncia ao padr√£o. Esta vers√£o final incorpora boas pr√°ticas de engenharia de software e exemplifica a aplica√ß√£o efetiva do Facade em um sistema realista e extens√≠vel.

## Metodologia e Contexto

No contexto deste artefato, foram desenvolvidas diferentes vers√µes do padr√£o Facade, implementadas pelos seguintes participantes: Cairo, Gabriel e Pedro, todas baseadas no mesmo cen√°rio: o processo de envio de uma mem√≥ria para um museu afetivo virtual. Cada um criou a sua vers√£o individual, apresentando varia√ß√µes em termos de estrutura, abstra√ß√£o e complexidade, permitindo uma an√°lise comparativa de abordagens poss√≠veis para o mesmo problema. 

### Motiva√ß√£o da escolha

O padr√£o Facade foi escolhido para simplificar a intera√ß√£o do usu√°rio com um conjunto complexo de funcionalidades envolvidas no envio de uma mem√≥ria. Ao centralizar as responsabilidades de valida√ß√£o, armazenamento, notifica√ß√£o e compartilhamento em uma √∫nica classe (EnvioDeMemoriaFacade), o sistema se torna mais coeso e f√°cil de usar, reduzindo o acoplamento entre as classes e oculta a complexidade dos processos internos, facilitando a reutiliza√ß√£o e manuten√ß√£o do c√≥digo. Al√©m disso, o Facade promove uma interface √∫nica e clara para o usu√°rio, alinhando-se √† necessidade de organiza√ß√£o e modulariza√ß√£o demonstrada no [diagrama atualizado](/PadroesDeProjeto/3.5.1.Atualiza√ß√£oDiagramaClasses.md).

## Vers√£o Final

A linguagem utilizada para a implementa√ß√£o do Facade foi python, o o diagrama foi feito utilizando no Draw.io.

## Diagrama

![Diagrama Facade](../assets/GOFsEstruturais/Facade/facadecairo.drawio.png)

## C√≥digo

```python
class Memoria:
    def __init__(self, imagem_url, titulo, descricao, data_memoria):
        self.imagem_url = imagem_url
        self.titulo = titulo
        self.descricao = descricao
        self.data_memoria = data_memoria

class ValidadorDeMemoria:
    def validar(self, memoria: Memoria):
        if not memoria.imagem_url:
            raise ValueError("Imagem obrigat√≥ria")
        if not memoria.titulo:
            raise ValueError("T√≠tulo obrigat√≥rio")
        if not memoria.descricao:
            raise ValueError("Descri√ß√£o obrigat√≥ria")
        if not memoria.data_memoria:
            raise ValueError("Data da mem√≥ria obrigat√≥ria")


class ArmazenacaoDeMemoria:
    def salvar(self, memoria: Memoria):
        print("Nova mem√≥ria salva no banco de dados")


class NotificacaoAdmin:
    def notificar(self, memoria: Memoria):
        print("Admin notificado sobre nova mem√≥ria enviada")


class EnvioDeMemoriaFacade:
    def __init__(self):
        self.validador = ValidadorDeMemoria()
        self.armazenamento = ArmazenacaoDeMemoria()
        self.notificacao = NotificacaoAdmin()

    def enviar_memoria(self, memoria: Memoria):
        self.validador.validar(memoria)
        self.armazenamento.salvar(memoria)
        self.notificacao.notificar(memoria)
        print("Envio conclu√≠do com sucesso")



class Usuario:
    def compartilharMemoria(self, memoria: Memoria):
        facade = EnvioDeMemoriaFacade()
        facade.enviar_memoria(memoria)
```

### Implementa√ß√£o do C√≥digo

![Facade](../assets/GOFsEstruturais/Facade/image.png)

O c√≥digo de implementa√ß√£o do padr√£o Facade pode ser encontrado neste [arquivo](https://github.com/UnBArqDsw2025-1-Turma02/2025.1_T02_G2_EternaFGA_Entrega03/blob/main/Projeto/GOFsEstruturais/Facade/FacadeFinal.py). Para execut√°-lo, navegue at√© o diret√≥rio onde o arquivo est√° localizado e utilize o seguinte comando:

```
python FacadeFinal.py
```

### Vers√µes desenvolvidas individualmente

<details>
<summary>Vers√£o do Pedro Gois:</summary>

#### Pedro
Interface 
```python
from abc import ABC, abstractmethod
from datetime import datetime
from enum import Enum


# -------------------------
# ENUMS E CLASSES DE SUPORTE
# -------------------------

class Status(Enum):
    PENDENTE = "pendente"
    APROVADA = "aprovada"
    REJEITADA = "rejeitada"


class MidiaDigital(ABC):
    @abstractmethod
    def tipo(self):
        pass


class Imagem(MidiaDigital):
    def __init__(self, caminho_arquivo):
        self.caminho_arquivo = caminho_arquivo

    def tipo(self):
        return "Imagem"


class Video(MidiaDigital):
    def __init__(self, caminho_arquivo):
        self.caminho_arquivo = caminho_arquivo

    def tipo(self):
        return "Video"


# -------------------------
# CLASSE PRODUTO
# -------------------------

class Memoria:
    def __init__(self, descricao, midia, data_envio, status):
        self.descricao = descricao
        self.midia = midia
        self.data_envio = data_envio
        self.status = status

    def __str__(self):
        return (f"Mem√≥ria enviada em {self.data_envio.strftime('%d/%m/%Y %H:%M:%S')}, "
                f"status: {self.status.name}, descri√ß√£o: {self.descricao}, "
                f"m√≠dia: {self.midia.tipo()}")


# -------------------------
# PADR√ÉO BUILDER
# -------------------------

class MemoriaBuilder(ABC):
    @abstractmethod
    def setDescricao(self, descricao): pass

    @abstractmethod
    def setMidia(self, midia): pass

    @abstractmethod
    def build(self): pass


class MemoriaPendenteBuilder(MemoriaBuilder):
    def __init__(self):
        self.descricao = None
        self.midia = None

    def setDescricao(self, descricao):
        self.descricao = descricao
        return self

    def setMidia(self, midia):
        self.midia = midia
        return self

    def build(self):
        return Memoria(
            descricao=self.descricao,
            midia=self.midia,
            data_envio=datetime.now(),
            status=Status.PENDENTE
        )


class DiretorEnvioMemoria:
    def __init__(self, builder: MemoriaBuilder):
        self.builder = builder

    def construirMemoria(self, descricao, midia):
        return self.builder.setDescricao(descricao).setMidia(midia).build()


# -------------------------
# CLASSES DE USU√ÅRIO
# -------------------------

class Estudante:
    def __init__(self, nome):
        self.nome = nome
        self.minhas_memorias = []

    def adicionar_memoria(self, memoria):
        self.minhas_memorias.append(memoria)


class Administrador:
    def aprovar(self, memoria):
        memoria.status = Status.APROVADA
        print("‚úî Mem√≥ria aprovada.")

    def rejeitar(self, memoria):
        memoria.status = Status.REJEITADA
        print("‚úñ Mem√≥ria rejeitada.")


# -------------------------
# PADR√ÉO FACADE
# -------------------------

class FachadaMemoria:
    def __init__(self, administrador: Administrador):
        self.administrador = administrador

    def enviar_memoria(self, estudante: Estudante, descricao: str, midia: MidiaDigital):
        """
        Estudante envia uma mem√≥ria com status pendente.
        """
        builder = MemoriaPendenteBuilder()
        diretor = DiretorEnvioMemoria(builder)
        memoria = diretor.construirMemoria(descricao, midia)

        estudante.adicionar_memoria(memoria)
        print("üì® Mem√≥ria enviada com sucesso! Aguardando aprova√ß√£o.")
        return memoria

    def aprovar_memoria(self, memoria: Memoria):
        self.administrador.aprovar(memoria)

    def rejeitar_memoria(self, memoria: Memoria):
        self.administrador.rejeitar(memoria)


# -------------------------
# EXEMPLO DE USO
# -------------------------

if __name__ == "__main__":
    admin = Administrador()
    estudante = Estudante("Jo√£o da Silva")

    fachada = FachadaMemoria(admin)

    # Envio de mem√≥ria
    memoria = fachada.enviar_memoria(
        estudante,
        descricao="Foto com amigos na faculdade",
        midia=Imagem("fotos/formatura.jpg")
    )

    print(memoria)

    # Aprova√ß√£o da mem√≥ria
    fachada.aprovar_memoria(memoria)
    print(memoria)
```

</details>

<details>
<summary>Vers√£o do Cairo Floren√ßo:</summary>

### Cairo

### Modelagem

![Diagrama Facade](../assets/GOFsEstruturais/Facade/facadecairo.drawio.png)

<center>

Autor: [Cairo Floren√ßo](https://github.com/CA1RO)

</center>

### C√≥digo

```python
class Memoria:
    def __init__(self, imagem_url, titulo, descricao, data_memoria):
        self.imagem_url = imagem_url
        self.titulo = titulo
        self.descricao = descricao
        self.data_memoria = data_memoria

class ValidadorDeMemoria:
    def validar(self, memoria: Memoria):
        if not memoria.imagem_url:
            raise ValueError("Imagem obrigat√≥ria")
        if not memoria.titulo:
            raise ValueError("T√≠tulo obrigat√≥rio")
        if not memoria.descricao:
            raise ValueError("Descri√ß√£o obrigat√≥ria")
        if not memoria.data_memoria:
            raise ValueError("Data da mem√≥ria obrigat√≥ria")


class ArmazenacaoDeMemoria:
    def salvar(self, memoria: Memoria):
        print("Nova mem√≥ria salva no banco de dados")


class NotificacaoAdmin:
    def notificar(self, memoria: Memoria):
        print("Admin notificado sobre nova mem√≥ria enviada")


class EnvioDeMemoriaFacade:
    def __init__(self):
        self.validador = ValidadorDeMemoria()
        self.armazenamento = ArmazenacaoDeMemoria()
        self.notificacao = NotificacaoAdmin()

    def enviar_memoria(self, memoria: Memoria):
        self.validador.validar(memoria)
        self.armazenamento.salvar(memoria)
        self.notificacao.notificar(memoria)
        print("Envio conclu√≠do com sucesso")



class Usuario:
    def compartilharMemoria(self, memoria: Memoria):
        facade = EnvioDeMemoriaFacade()
        facade.enviar_memoria(memoria)
```

<center>

Autor: [Cairo Floren√ßo](https://github.com/CA1RO)

</center>

</details>

<details>
<summary>Vers√£o do Gabriel Scheidt:</summary>

#### Gabriel Scheidt

```python
from datetime import datetime
from typing import List, Tuple
from memoria_builder import (
    MemoriaBuilder,
    Memoria,
    TipoMidia,
    Visibilidade,
    StatusMemoria,
)


# ---------------- Subsistemas ----------------

class ValidadorDeMemoria:
    def validar(self, memoria: Memoria):
        if not memoria.titulo:
            raise ValueError("T√≠tulo obrigat√≥rio.")
        if not memoria.descricao:
            raise ValueError("Descri√ß√£o obrigat√≥ria.")
        if not memoria.midias or len(memoria.midias) == 0:
            raise ValueError("Deve conter pelo menos uma m√≠dia.")
        if not memoria.nome_autor or not memoria.email_autor:
            raise ValueError("Autor e email obrigat√≥rios.")
        if not isinstance(memoria.visibilidade, Visibilidade):
            raise ValueError("Visibilidade inv√°lida.")
        if not isinstance(memoria.status, StatusMemoria):
            raise ValueError("Status inv√°lido.")
        print("[Validador] Mem√≥ria validada com sucesso.")

class RepositorioDeMemorias:
    def salvar(self, memoria: Memoria):
        print(f"[DB] Mem√≥ria '{memoria.titulo}' de {memoria.nome_autor} salva no banco de dados.")

class NotificacaoAdministrativa:
    def enviar_alerta(self, memoria: Memoria):
        print(f"[Notifica√ß√£o] Admin notificado sobre a nova mem√≥ria: '{memoria.titulo}'.")

class LoggerDeEnvio:
    def registrar(self, memoria: Memoria):
        print(f"[Log] Enviada em: {memoria.data_criacao.isoformat()} | Autor: {memoria.nome_autor}")


# ---------------- Facade ----------------

class EnvioMemoriaFacade:
    def __init__(self):
        self.validador = ValidadorDeMemoria()
        self.repositorio = RepositorioDeMemorias()
        self.notificador = NotificacaoAdministrativa()
        self.logger = LoggerDeEnvio()

    def enviar_memoria(
        self,
        titulo: str,
        descricao: str,
        midias: List[Tuple[TipoMidia, str]],
        nome_autor: str,
        email_autor: str,
        categorias: List[str],
        visibilidade: Visibilidade = Visibilidade.PUBLICO,
        status: StatusMemoria = StatusMemoria.PENDENTE
    ) -> Memoria:
        builder = MemoriaBuilder()
        builder.com_titulo(titulo)\
               .com_descricao(descricao)\
               .com_autor(nome_autor, email_autor)\
               .com_visibilidade(visibilidade)\
               .com_status_manual(status)\
               .com_categorias(categorias)

        for tipo, caminho in midias:
            builder.adicionar_midia(tipo, caminho)

        memoria = builder.build()

        self.validador.validar(memoria)
        self.repositorio.salvar(memoria)
        self.notificador.enviar_alerta(memoria)
        self.logger.registrar(memoria)

        print("[Facade] Envio da mem√≥ria conclu√≠do com sucesso.")
        return memoria
```
</details>




## Hist√≥rico de Vers√£o

| Vers√£o | Data | Descri√ß√£o | Autor(es) | Revisor(es) | Coment√°rio do Revisor |
| :-: | :-: | :-: | :-: | :-: | :-: |
| 1.0 | 22/05 | Primeira vers√£o do GoF | Pedro Gois | Pedro Gois | - |
| 1.1 | 23/05 | Adicionando minha vers√£o de GoF Estrutural Facade | Cairo Floren√ßo | | - |
| 1.2 | 30/05 | Atualizando minha vers√£o de GoF Estrutural Facade | Pedro Gois | | - |
| 1.3 | 31/05 | Atualizando minha vers√£o de GoF Estrutural Facade e adicionando a introdu√ß√£o | Gabriel Scheidt | Cairo Floren√ßo | tudo ok. |
| 1.4 | 01/06 | Atualizando vers√£o individual de GoF Facade | Cairo | | - |
| 1.5 | 01/06 | Adicionando a motiva√ß√£o, metodologia e outras explica√ß√µes sobre o GoF Facade | Cairo | | - |
| 2.0 | 01/06 | Adicionando vers√£o final do Facade | Cairo Floren√ßo| | - |
| 2.1 | 02/06 | Adicionando a parte de implementa√ß√£o do c√≥digo | Cairo Floren√ßo | | - |